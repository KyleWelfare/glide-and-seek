[gd_scene load_steps=24 format=4 uid="uid://b5w2xf8q3ysi8"]

[ext_resource type="PackedScene" uid="uid://b13kooijltq37" path="res://scenes/tilesets/grid_background.tscn" id="1_b6mj2"]
[ext_resource type="TileSet" uid="uid://cyke4okorrvbe" path="res://assets/art/tiles/graybox_2d/Tileset/TileSet_16px.tres" id="2_4foob"]
[ext_resource type="PackedScene" uid="uid://cugopqshlv2ua" path="res://scenes/objects/one_way_platform.tscn" id="3_dbpur"]
[ext_resource type="PackedScene" uid="uid://boreq306q7mmn" path="res://scenes/hazards/hazard_box.tscn" id="4_urs8y"]
[ext_resource type="PackedScene" uid="uid://b4wmjwvtxw458" path="res://scenes/objects/exit_door.tscn" id="5_2wwba"]
[ext_resource type="PackedScene" uid="uid://b15uwd8t0h7l6" path="res://scenes/hazards/patrol_ground.tscn" id="5_urs8y"]
[ext_resource type="PackedScene" uid="uid://ckbub55fbvfib" path="res://scenes/objects/collectible.tscn" id="6_0mb5o"]
[ext_resource type="PackedScene" uid="uid://btsupkb0c52if" path="res://scenes/hazards/patrol_air.tscn" id="6_urs8y"]
[ext_resource type="PackedScene" uid="uid://d3q4s5i1uyrwv" path="res://scenes/tilesets/hazard_tiles.tscn" id="7_403vb"]
[ext_resource type="PackedScene" uid="uid://cd8goosvr0g65" path="res://scenes/characters/player_fsm.tscn" id="8_um1ap"]
[ext_resource type="PackedScene" uid="uid://cy2v23n5euw35" path="res://scenes/ui/timer_hud.tscn" id="9_wuu6u"]
[ext_resource type="PackedScene" uid="uid://bkasene7ago0o" path="res://scenes/ui/level_end_menu.tscn" id="10_6etkt"]
[ext_resource type="PackedScene" uid="uid://bbsqp4j468j2t" path="res://scenes/menus/level_select.tscn" id="11_4foob"]
[ext_resource type="PackedScene" uid="uid://b7r0ehirj8auu" path="res://scenes/managers/level_flow_manager.tscn" id="11_q5k5v"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8i4sc"]
size = Vector2(48, 8)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qjv01"]
size = Vector2(64, 9)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pvo72"]
size = Vector2(64, 11)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ovn1e"]
size = Vector2(11, 94)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_r6oeo"]
size = Vector2(382, 11)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wh58x"]
size = Vector2(304, 11)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vf45w"]
size = Vector2(8, 30)

[sub_resource type="Curve2D" id="Curve2D_2wwba"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -82, -2, 0, 0, 0, 0, 85, -7, 0, 0, 0, 0, -82, -2)
}
point_count = 3

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dbpur"]
size = Vector2(1147, 872)

[node name="LevelRoot" type="Node2D"]

[node name="World" type="Node2D" parent="."]

[node name="GridBackground" parent="World" instance=ExtResource("1_b6mj2")]
offset_left = -703.0
offset_top = -894.0
offset_right = 1187.0
offset_bottom = 516.0
scale = Vector2(0.809777, 0.809777)

[node name="TileMapLayer" type="TileMapLayer" parent="World" groups=["terrain"]]
tile_map_data = PackedByteArray("AAADAAcABQALAAsAAAALAAcABQALAAsAAAATAAcABQALAAsAAAD7/wcABQALAAsAAADz/wcABQALAAsAAAAbAAcABQALAAsAAAAPAP//BQALAAMAAAAXAP//BQALAAMAAAAfAP//BQALAAMAAAAfAP3/BQALAAEAAAAjAAcABQALAAsAAAArAAcABQALAAsAAAArAP//BQALAAsAAAArAPf/BQALAAsAAAArAO//BQALAAsAAAArAOf/BQALAAsAAAAfAPf/BQALAAsAAAAfAO//BQALAAsAAAArAN//BQALAAsAAAAXAO//BQALAAsAAAAPAO//BQALAAsAAAAXAPf/BQALAAsAAAAPAPf/BQALAAsAAAAHAO//BQALAAYAAAAHAOv/BQALAAMAAAAHAPf/BQABACcAAAArANf/BQALAAsAAAAjANf/BQALAAsAAAAbANf/BQALAAsAAAATANf/BQALAAsAAAALANf/BQALAAsAAAAjANn/BQALAAMAAAAbANn/BQALAAMAAAATANv/BQALAAYAAAALANv/BQALAAYAAAADANf/BQALAAsAAAABAOf/BQADAAsAAAD//+f/BQADAAsAAAD//+//BQADAAYAAAD9/+//BQABAAYAAAD//+v/BQADAAMAAAD9/+v/BQABAAMAAAD5/+f/BQADAAsAAAD5/9//BQADAAYAAAD3/9//BQAGAAYAAAD9//D/BQAOACMAAAD///T/BQAPACcAAAD8/+D/BQAOACMAAAD9/+H/BQAOACMAAAD9/+D/BQABAAEAAAAUANv/BQABACsAAAAcANr/BQABACsAAAAbANr/BQALAAEAAAAMANz/BQABACsAAAAEAN3/BQABACsAAAALANz/BQALAAEAAAABAN//BQADAAsAAAD//9//BQADAAsAAAADANv/BQADAAYAAAADAN3/BQADAAMAAAADAN7/BQAQACMAAAACAN//BQAQACMAAAACAN7/BQABAAEAAAD9/9//BQADAAsAAADz/9//BQALAAYAAADj/9f/BQALAAsAAADj/9//BQALAAsAAADj/+f/BQALAAsAAADr/9//BQAGAAYAAADj/+//BQALAAsAAADj//f/BQALAAsAAADj////BQALAAsAAADj/wcABQALAAsAAADr/wcABQALAAsAAADn/+f/BQADAAsAAAD0/9n/BQADAAEAAADs/9n/BQADAAEAAAD7/9H/BQALAAMAAADz/9H/BQALAAMAAADr/9H/BQALAAMAAADl/9P/BQADAAMAAADn/9L/BQAQACMAAADm/9P/BQAQACMAAADl/9T/BQAQACMAAADk/9X/BQAQACMAAADk/9T/BQABAAEAAADm/9L/BQABAAEAAAD7/9L/BQABAAEAAAD6/9L/BQAOACMAAAD7/9P/BQAOACMAAADv/+//BQALAAsAAAD3/+//BQALAAsAAAD3/+f/BQALAAsAAADv/+f/BQALAAsAAAD5/+3/BQADAAMAAAD5/+7/BQAQACMAAAD4/+//BQAQACMAAAD4/+7/BQABAAEAAADn/+7/BQABAAEAAADn/+//BQAOACMAAADm/+7/BQAOACMAAADn/+3/BQADAAMAAADn/+v/BQADAAYAAAD///P/BQADAAYAAAAHAPP/BQALAAYAAAAHAPX/BQALAAMAAAAHAPb/BQALAAEAAAARAPj/BQAGAAEAAAASAPj/BQAQACMAAAANAPj/BQAOACMAAADj/8//BQALAAsAAADr/8//BQALAAsAAADz/8//BQALAAsAAAD7/8//BQALAAsAAAADAM//BQALAAsAAAALAM//BQALAAsAAAATAM//BQALAAsAAAAbAM//BQALAAsAAAAjAM//BQALAAsAAAArAM//BQALAAsAAAAzAM//BQALAAsAAAAzANf/BQALAAsAAAAzAN//BQALAAsAAAAzAOf/BQALAAsAAAAzAO//BQALAAsAAAAzAPf/BQALAAsAAAAzAP//BQALAAsAAAAzAAcABQALAAsAAAAzAA8ABQALAAsAAAArAA8ABQALAAsAAAAjAA8ABQALAAsAAAAbAA8ABQALAAsAAAATAA8ABQALAAsAAAALAA8ABQALAAsAAAADAA8ABQALAAsAAAD7/w8ABQALAAsAAADz/w8ABQALAAsAAADr/w8ABQALAAsAAADj/w8ABQALAAsAAADb/w8ABQALAAsAAADb/wcABQALAAsAAADb////BQALAAsAAADb//f/BQALAAsAAADb/+//BQALAAsAAADb/+f/BQALAAsAAADb/9//BQALAAsAAADb/9f/BQALAAsAAADb/8//BQALAAsAAADl//b/BQADAAMAAADm//b/BQABAAMAAAD8/+3/BQAXACkAAAD7/+3/BQAXACkAAAD6/+3/BQAXACkAAAD6//n/BQAXACkAAAD7//n/BQAXACkAAAD5//n/BQAXACkAAAD8//n/BQAXACkAAAAAAOj/BQADAAEAAAD+/+j/BQAOACMAAAABAOj/BQAQACMAAADq////BQADAAYAAADq//v/BQADAAEAAADn////BQAGAAYAAADn//v/BQAGAAMAAADn//n/BQAGAAMAAADl//f/BQADAAEAAADm//f/BQABAAEAAADn//f/BQAQACEAAADo//r/BQAQACEAAADo////BQABAAYAAADo//v/BQABAAEAAADy//z/BQALAAMAAAD2//z/BQAGAAMAAAD2//7/BQADAAMAAAD5/+v/BQADAAYAAAD6/+z/BQABABQAAAD6/9z/BQABAAMAAADn/9//BQADAAMAAADn/93/BQABAAMAAADm/9v/BQABAAEAAADm/93/BQABAAMAAAAjAPr/BQABAAsAAAAjAOz/BQABAAsAAAAjAOT/BQABAAsAAAAjANz/BQABAAMAAAA=")
tile_set = ExtResource("2_4foob")

[node name="TerrainContainer" type="Node2D" parent="World"]

[node name="OneWayPlatform" parent="World/TerrainContainer" instance=ExtResource("3_dbpur")]
position = Vector2(-86, -294)

[node name="CollisionShape2D" parent="World/TerrainContainer/OneWayPlatform" index="0"]
position = Vector2(14, -6)
shape = SubResource("RectangleShape2D_8i4sc")

[node name="OneWayPlatform2" parent="World/TerrainContainer" instance=ExtResource("3_dbpur")]
position = Vector2(-102, -102)

[node name="CollisionShape2D" parent="World/TerrainContainer/OneWayPlatform2" index="0"]
position = Vector2(22, -5.5)
shape = SubResource("RectangleShape2D_qjv01")

[node name="HazardsContainer" type="Node2D" parent="World"]

[node name="HazardBox" parent="World/HazardsContainer" instance=ExtResource("4_urs8y")]
position = Vector2(512, -10)

[node name="CollisionShape2D" parent="World/HazardsContainer/HazardBox" index="0"]
position = Vector2(32, 4.5)
shape = SubResource("RectangleShape2D_pvo72")

[node name="HazardBox2" parent="World/HazardsContainer" instance=ExtResource("4_urs8y")]
position = Vector2(576, -256)

[node name="CollisionShape2D" parent="World/HazardsContainer/HazardBox2" index="0"]
position = Vector2(-5.5, 0)
shape = SubResource("RectangleShape2D_ovn1e")

[node name="HazardBox3" parent="World/HazardsContainer" instance=ExtResource("4_urs8y")]
position = Vector2(502, -394)

[node name="CollisionShape2D" parent="World/HazardsContainer/HazardBox3" index="0"]
position = Vector2(-182, 4.5)
shape = SubResource("RectangleShape2D_r6oeo")

[node name="HazardBox4" parent="World/HazardsContainer" instance=ExtResource("4_urs8y")]
position = Vector2(-106, -586)

[node name="CollisionShape2D" parent="World/HazardsContainer/HazardBox4" index="0"]
position = Vector2(-142, 4.5)
shape = SubResource("RectangleShape2D_wh58x")

[node name="HazardBox5" parent="World/HazardsContainer" instance=ExtResource("4_urs8y")]
position = Vector2(-438, -518)

[node name="CollisionShape2D" parent="World/HazardsContainer/HazardBox5" index="0"]
position = Vector2(-5.5, 6)
shape = SubResource("RectangleShape2D_vf45w")

[node name="HazardBox6" parent="World/HazardsContainer" instance=ExtResource("4_urs8y")]
position = Vector2(-417, -422)

[node name="CollisionShape2D" parent="World/HazardsContainer/HazardBox6" index="0"]
position = Vector2(-3.5, 6)
shape = SubResource("RectangleShape2D_vf45w")

[node name="HazardBox7" parent="World/HazardsContainer" instance=ExtResource("4_urs8y")]
position = Vector2(-438, -326)

[node name="CollisionShape2D" parent="World/HazardsContainer/HazardBox7" index="0"]
position = Vector2(-6, 6)
shape = SubResource("RectangleShape2D_vf45w")

[node name="EnemiesContainer" type="Node2D" parent="World"]

[node name="PatrolGround" parent="World/EnemiesContainer" instance=ExtResource("5_urs8y")]
position = Vector2(179, -41)

[node name="PatrolAir" parent="World/EnemiesContainer" instance=ExtResource("6_urs8y")]
position = Vector2(41, -80)
curve = SubResource("Curve2D_2wwba")

[node name="DoorsContainer" type="Node2D" parent="World"]

[node name="ExitDoor" parent="World/DoorsContainer" instance=ExtResource("5_2wwba")]
position = Vector2(-292, -48)
mode = 2

[node name="Collectible" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(359, 35)

[node name="Collectible2" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(549, 2)

[node name="Collectible3" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(690, -22)

[node name="Collectible4" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(829, -100)

[node name="Collectible5" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(828, -297)

[node name="Collectible6" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(684, -432)

[node name="Collectible7" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(497, -380)

[node name="Collectible8" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(573, -392)

[node name="Collectible9" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(223, -315)

[node name="Collectible10" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(16, -584)

[node name="Collectible11" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(7, -139)

[node name="Collectible12" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(117, -98)

[node name="Collectible13" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(213, -81)

[node name="Collectible15" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(92, 35)

[node name="Collectible14" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(199, -587)

[node name="Collectible16" parent="World/DoorsContainer/ExitDoor" instance=ExtResource("6_0mb5o")]
position = Vector2(-149, -367)

[node name="HazardTiles" parent="World" instance=ExtResource("7_403vb")]
tile_map_data = PackedByteArray("AAAgAP//AAAGAAEAAAAhAP//AAAHAAEAAAAiAP//AAAIAAEAAAAjAP//AAAJAAEAAAAjAPL/AAABAAEAAGAjAPH/AAABAAEAAGAjAPD/AAABAAEAAGAjAO//AAABAAEAAGAjAO7/AAABAAEAAGAjAO3/AAABAAEAAGAIAOf/AAABAAEAAAAJAOf/AAABAAEAAAAKAOf/AAABAAEAAAALAOf/AAABAAEAAAAMAOf/AAABAAEAAAANAOf/AAABAAEAAAAOAOf/AAABAAEAAAAPAOf/AAABAAEAAAAQAOf/AAABAAEAAAARAOf/AAABAAEAAAASAOf/AAABAAEAAAATAOf/AAABAAEAAAAUAOf/AAABAAEAAAAVAOf/AAABAAEAAAAWAOf/AAABAAEAAAAXAOf/AAABAAEAAAAYAOf/AAABAAEAAAAZAOf/AAABAAEAAAAaAOf/AAABAAEAAAAbAOf/AAABAAEAAAAcAOf/AAABAAEAAAAdAOf/AAABAAEAAAAeAOf/AAABAAEAAAAfAOf/AAABAAEAAADn/9v/AAABAAEAAADo/9v/AAABAAEAAADp/9v/AAABAAEAAADq/9v/AAABAAEAAADr/9v/AAABAAEAAADs/9v/AAABAAEAAADt/9v/AAABAAEAAADu/9v/AAABAAEAAADv/9v/AAABAAEAAADw/9v/AAABAAEAAADx/9v/AAABAAEAAADy/9v/AAABAAEAAADz/9v/AAABAAEAAAD0/9v/AAABAAEAAAD1/9v/AAABAAEAAAD2/9v/AAABAAEAAAD3/9v/AAABAAEAAAD4/9v/AAABAAEAAAD5/9v/AAABAAEAAADk/9//AAABAAEAAFDk/+D/AAABAAEAAFDl/+X/AAABAAEAAGDl/+b/AAABAAEAAGDk/+v/AAABAAEAAFDk/+z/AAABAAEAAFA=")

[node name="Player" parent="." instance=ExtResource("8_um1ap")]

[node name="UIContainer" type="CanvasLayer" parent="."]

[node name="TimerHUD" parent="UIContainer" instance=ExtResource("9_wuu6u")]

[node name="LevelEndMenu" parent="UIContainer" instance=ExtResource("10_6etkt")]
hub_scene = ExtResource("11_4foob")

[node name="LevelFlowManager" parent="." instance=ExtResource("11_q5k5v")]
player_path = NodePath("../Player")
timer_hud_path = NodePath("../UIContainer/TimerHUD")
end_menu_path = NodePath("../UIContainer/LevelEndMenu")
level_id = "level_3"

[node name="CameraBounds" type="Area2D" parent="."]
visible = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="CameraBounds"]
position = Vector2(64.5, -372)
shape = SubResource("RectangleShape2D_dbpur")

[editable path="World/TerrainContainer/OneWayPlatform"]
[editable path="World/TerrainContainer/OneWayPlatform2"]
[editable path="World/HazardsContainer/HazardBox"]
[editable path="World/HazardsContainer/HazardBox2"]
[editable path="World/HazardsContainer/HazardBox3"]
[editable path="World/HazardsContainer/HazardBox4"]
[editable path="World/HazardsContainer/HazardBox5"]
[editable path="World/HazardsContainer/HazardBox6"]
[editable path="World/HazardsContainer/HazardBox7"]
[editable path="UIContainer/TimerHUD"]
